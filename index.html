<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Labyrinthe</title>
    <link href="interpreter/style.css" rel="stylesheet" type="text/css">

    <script src="p5/p5.js"></script>
    <script src="p5/labyrinthe.js"></script>

    <script src="interpreter/acorn_interpreter.js"></script>
    <script src="interpreter/interpreter.js"></script>
    <!-- inclusion order is important -->
    <script src="interpreter/custom_api.js"></script>
    <script src="interpreter/init_interpreter.js"></script>
       
    <!-- Blockly -->
    <script src="blockly/blockly_compressed.js"></script>
    <script src="blockly/blocks_compressed.js"></script>
    <script src="blockly/msg/js/fr.js"></script>
    <!-- Generated language -->
    <script src="blockly/javascript_compressed.js"></script>
    <!-- Custom blockly elements -->
    <script src="custom/blocks.js"></script>
    <script src="custom/my_toolbox.js"></script>
</head>
<body>
  <h1>Labyrinthe</h1>
  
  <table border="1">
    <tr>
      <td><div id="blocklyDiv" style="height: 500px; width: 500px;"></td>
      <td style="padding:10px;"><div id="myCanvas"></td>
    </tr>
    <tr>
        <td>
          <textarea id="javascript-code0" class="js-code">
move();
move();
turn('turnLeft');
move();
turn('turnRight');
</textarea>
        </td>
      <td>
          <textarea id="javascript-code1" class="js-code">
turn('turnLeft');
move();
move();
turn('turnRight');
move();
move();      
turn('turnRight');
move();
turn('turnLeft');
</textarea>
      </td>
    </tr>
  </table>
<button onclick="parseBtn()" id="parseBtn">Parse</button>
<button onclick="r0()" id="runBtn">Run</button>
<button onclick="resetBtn()" id="resetBtn">Reset</button>

		<!-- Blockly -->
		<script>
			<!-- Injection -->
			var workspace = Blockly.inject('blocklyDiv',
					{
					<!-- toolbox: document.getElementById('toolbox'), -->
					toolbox: my_toolbox, // from my_toolbox.js
					trashcan: true
					}
				);
			<!-- Automatic update for generated code -->
			function myUpdateFunction(event) {
				var code = Blockly.JavaScript.workspaceToCode(workspace);
			document.getElementById('javascript-code0').value = code;
			}
			workspace.addChangeListener(myUpdateFunction);
		</script>
</body>
</html>
